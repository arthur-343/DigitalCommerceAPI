# src/test/resources/application-test.yml
spring:
  config:
    activate:
      on-profile: test

  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password: sa
    driver-class-name: org.h2.Driver

  jpa:
    hibernate:
      # ALTERAÇÃO PRINCIPAL AQUI:
      # Desligamos o controle do Hibernate para entregar ao Flyway.
      # Flyway agora será o único responsável por criar e gerenciar o schema.
      ddl-auto: none
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.H2Dialect
    database: H2

  # Garantindo que o Flyway esteja ativo para o perfil de teste.
  flyway:
    enabled: true

  h2:
    console:
      enabled: true

# Valores fixos para o ambiente de teste
app:
  jwtSecret: test-secret-key-1234567890123456789012345678901234567890
  jwtExpirationMs: 86400000

ecom:
  app:
    jwtCookieName: JWT_TEST

project:
  image: /test/default-image.jpg

mercadopago:
  access:
    token: TEST-MERCADOPAGO-TOKEN